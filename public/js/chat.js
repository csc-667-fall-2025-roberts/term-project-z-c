import { l as p, C as i, a as u } from "./assets/keys-g5P_hOXI.js"; const m = p(), S = document.querySelector("#message-listing"), o = document.querySelector("#message-submit input"), y = document.querySelector("#message-submit button"), h = document.querySelector("#template-chat-message"), d = ({ username: e, created_at: t, message: s }) => { const n = h.content.cloneNode(!0), c = n.querySelector(".message-time"), a = new Date(t); c.textContent = a.toLocaleDateString(), console.log(a, c); const l = n.querySelector(".message-username"); l.textContent = e, console.log(e, l); const r = n.querySelector(".message-text"); r.textContent = s, console.log(s, r), S.appendChild(n) }; m.on(i, ({ messages: e }) => { console.log(i, { messages: e }), e.forEach(t => { d(t) }) }); m.on(u, e => { console.log(u, e), d(e) }); const g = () => { const e = o.value.trim(); if (e.length > 0) { const t = JSON.stringify({ message: e }); fetch("/chat/", { method: "post", body: t, credentials: "include", headers: { "Content-Type": "application/json" } }) } o.value = "" }; y.addEventListener("click", e => { e.preventDefault(), g() }); o.addEventListener("keydown", e => { e.key == "Enter" && g() }); fetch("/chat/", { method: "get", credentials: "include" });
//# sourceMappingURL=chat.js.map
